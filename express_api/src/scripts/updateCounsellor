import mongoose from 'mongoose';
import dotenv from 'dotenv';
import Counsellor from '../models/Counsellor.js';

// Load environment variables
dotenv.config();

// Connect to MongoDB
mongoose.connect('mongodb+srv://khatiwadasandesh01:aHMQIqc3X9b1LVYW@cluster0.xwcq4o0.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0')
  .then(() => console.log('Connected to MongoDB'))
  .catch(err => console.error('MongoDB connection error:', err));

// Function to update counsellor data
const updateCounsellorData = async () => {
  try {
    // Array of counsellor updates with email, nmcNo, and qualification
    const counsellorUpdates = [
                    {
        email: 'anisha@gmail.com',
        nmcNo: '5676',
        qualification: 'MD in Psychiatry',
        designation: 'Psychiastrist'
      },

        {
        email: ' binod@gmail.com',
        nmcNo: '56756',
        qualification: 'MD in Psychiatry',
        designation: 'Psychiastrist'
      },


     


      

      
      
    ];

    // Update each counsellor
    for (const update of counsellorUpdates) {
      const counsellor = await Counsellor.findOneAndUpdate(
        { email: update.email },
        {
          $set: {
            nmcNo: update.nmcNo,
            qualification: update.qualification,
            designation: update.designation
          }
        },
        { new: true }
      );

      if (counsellor) {
        console.log(`Updated counsellor: ${update.email}`);
      } else {
        console.log(`Counsellor not found: ${update.email}`);
      }
    }

    console.log('All counsellor updates completed!');
    process.exit(0);
  } catch (error) {
    console.error('Error updating counsellor data:', error);
    process.exit(1);
  }
};

// Run the script
updateCounsellorData();